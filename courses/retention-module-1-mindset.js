class RetentionModule1 extends HTMLElement {
    connectedCallback() {
        this.attachShadow({ mode: 'open' });
        this.render();
        this.initializeComponent();
    }
    render() {
        const styles = `@import url('https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap');:host{display:block;--font-display:'DM Serif Display',Georgia,serif;--font-body:'Plus Jakarta Sans',sans-serif;--bg-primary:#0a1628;--bg-secondary:#142238;--bg-tertiary:#1e3a5f;--text-primary:#f9fafb;--text-secondary:#d1d5db;--text-muted:#9ca3af;--border-color:#374151;--accent:#10b981;--accent-dark:#059669;--accent-light:rgba(16,185,129,0.2);--gold:#d4a853;--green:#10b981;--green-light:rgba(16,185,129,0.2);--red:#ef4444;--red-light:rgba(239,68,68,0.2)}*{margin:0;padding:0;box-sizing:border-box}.wrapper{font-family:var(--font-body);background:var(--bg-primary);color:var(--text-secondary);line-height:1.7}.progress-container{background:var(--bg-secondary);border-bottom:1px solid var(--border-color);padding:1rem 1.5rem}.progress-wrapper{max-width:900px;margin:0 auto}.progress-header{display:flex;justify-content:space-between;margin-bottom:0.5rem}.progress-label{font-size:0.85rem;font-weight:600;color:var(--text-primary)}.progress-text{font-size:0.85rem;color:var(--text-muted)}.progress-bar{height:8px;background:var(--bg-tertiary);border-radius:10px;overflow:hidden}.progress-fill{height:100%;background:linear-gradient(90deg,var(--accent),var(--gold));border-radius:10px;transition:width 0.5s;width:0%}main{max-width:900px;margin:0 auto;padding:2rem 1.5rem 4rem}.module-header{margin-bottom:2rem}.breadcrumb{display:flex;align-items:center;gap:0.5rem;font-size:0.85rem;color:var(--text-muted);margin-bottom:1rem;flex-wrap:wrap}.breadcrumb a{color:var(--accent);text-decoration:none}.breadcrumb a:hover{text-decoration:underline}.module-title{font-family:var(--font-display);font-size:clamp(1.75rem,5vw,2.5rem);color:var(--text-primary);margin-bottom:0.5rem}.module-description{font-size:1.1rem;color:var(--text-secondary)}.topic-nav{display:flex;gap:0.5rem;margin-bottom:2rem;overflow-x:auto;padding-bottom:0.5rem;-webkit-overflow-scrolling:touch}.topic-tab{flex-shrink:0;padding:0.6rem 1rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;font-size:0.85rem;font-weight:500;color:var(--text-secondary);cursor:pointer;transition:all 0.3s;display:flex;align-items:center;gap:0.4rem;font-family:var(--font-body)}.topic-tab:hover{border-color:var(--accent);color:var(--accent)}.topic-tab.active{background:var(--accent);border-color:var(--accent);color:white}.topic-tab.completed{background:var(--green-light);border-color:var(--green);color:var(--green)}.topic-content{display:none;animation:fadeIn 0.4s}.topic-content.active{display:block}@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.lesson-card{background:var(--bg-secondary);border-radius:16px;padding:2rem;margin-bottom:2rem;border:1px solid var(--border-color)}.lesson-card h2{font-family:var(--font-display);font-size:1.5rem;color:var(--text-primary);margin-bottom:1.5rem}.lesson-card h3{font-size:1.1rem;color:var(--text-primary);margin:1.5rem 0 0.75rem}.lesson-card p{margin-bottom:1rem}.lesson-card ul,.lesson-card ol{margin:1rem 0 1rem 1.5rem}.lesson-card li{margin-bottom:0.5rem}.key-point{background:var(--accent-light);border-left:4px solid var(--accent);padding:1rem 1.25rem;border-radius:0 10px 10px 0;margin:1.5rem 0}.key-point strong{color:var(--accent);display:block;margin-bottom:0.25rem}.tip-box{background:var(--bg-tertiary);border-radius:10px;padding:1rem 1.25rem;margin:1.5rem 0;display:flex;gap:0.75rem}.tip-box svg{width:24px;height:24px;fill:var(--gold);flex-shrink:0}.stat-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:1rem;margin:1.5rem 0}.stat-box{background:linear-gradient(135deg,var(--accent-light),var(--bg-tertiary));border-radius:12px;padding:1.25rem;text-align:center}.stat-box .stat-value{font-family:var(--font-display);font-size:2rem;color:var(--accent);line-height:1}.stat-box .stat-label{font-size:0.8rem;color:var(--text-secondary);margin-top:0.5rem}.quiz-section{background:var(--bg-secondary);border-radius:16px;padding:2rem;border:1px solid var(--border-color)}.quiz-header{display:flex;align-items:center;gap:0.75rem;margin-bottom:1.5rem}.quiz-icon{width:48px;height:48px;background:var(--accent-light);border-radius:12px;display:flex;align-items:center;justify-content:center}.quiz-icon svg{width:24px;height:24px;fill:var(--accent)}.quiz-title{font-family:var(--font-display);font-size:1.25rem;color:var(--text-primary)}.quiz-subtitle{font-size:0.9rem;color:var(--text-muted)}.question{margin-bottom:1.5rem;padding-bottom:1.5rem;border-bottom:1px solid var(--border-color)}.question:last-of-type{border-bottom:none;margin-bottom:0;padding-bottom:0}.question-text{font-weight:600;color:var(--text-primary);margin-bottom:1rem}.question-number{color:var(--accent);margin-right:0.5rem}.options{display:flex;flex-direction:column;gap:0.5rem}.option{display:flex;align-items:center;gap:0.75rem;padding:1rem;background:var(--bg-tertiary);border:2px solid transparent;border-radius:10px;cursor:pointer;transition:all 0.2s}.option:hover{border-color:var(--accent)}.option.selected{border-color:var(--accent);background:var(--accent-light)}.option.correct{border-color:var(--green);background:var(--green-light)}.option.incorrect{border-color:var(--red);background:var(--red-light)}.option-radio{width:20px;height:20px;border:2px solid var(--text-muted);border-radius:50%;flex-shrink:0;transition:all 0.2s;position:relative}.option.selected .option-radio{border-color:var(--accent);background:var(--accent)}.option.correct .option-radio{border-color:var(--green);background:var(--green)}.option.incorrect .option-radio{border-color:var(--red);background:var(--red)}.option.selected .option-radio::after,.option.correct .option-radio::after,.option.incorrect .option-radio::after{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:8px;height:8px;background:white;border-radius:50%}.option-text{color:var(--text-secondary)}.feedback{display:none;padding:1rem;border-radius:10px;margin-top:0.75rem;font-size:0.9rem}.feedback.show{display:block}.feedback.correct{background:var(--green-light);color:var(--green)}.feedback.incorrect{background:var(--red-light);color:var(--red)}.quiz-results{display:none;text-align:center;padding:2rem 0}.quiz-results.show{display:block}.results-icon{width:80px;height:80px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 1.5rem}.results-icon.pass{background:var(--green-light)}.results-icon.fail{background:var(--red-light)}.results-icon svg{width:40px;height:40px}.results-icon.pass svg{fill:var(--green)}.results-icon.fail svg{fill:var(--red)}.results-title{font-family:var(--font-display);font-size:1.5rem;color:var(--text-primary);margin-bottom:0.5rem}.results-score{font-size:1.1rem;color:var(--text-secondary);margin-bottom:1.5rem}.btn{display:inline-flex;align-items:center;justify-content:center;gap:0.5rem;padding:0.875rem 1.75rem;border-radius:10px;font-weight:600;font-size:1rem;cursor:pointer;transition:all 0.3s;border:none;text-decoration:none;font-family:var(--font-body)}.btn-primary{background:linear-gradient(135deg,var(--accent),var(--accent-dark));color:white}.btn-primary:hover{transform:translateY(-2px)}.btn-secondary{background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)}.btn-secondary:hover{border-color:var(--accent);color:var(--accent)}.btn svg{width:20px;height:20px;fill:currentColor}.quiz-actions{display:flex;gap:1rem;margin-top:1.5rem;flex-wrap:wrap}.nav-buttons{display:flex;justify-content:space-between;gap:1rem;margin-top:2rem;padding-top:2rem;border-top:1px solid var(--border-color)}.final-quiz-intro{text-align:center;padding:3rem 1rem}.final-quiz-intro h2{font-family:var(--font-display);font-size:2rem;color:var(--text-primary);margin-bottom:1rem}.final-quiz-intro p{color:var(--text-secondary);margin-bottom:2rem;max-width:500px;margin-left:auto;margin-right:auto}.final-quiz-stats{display:flex;justify-content:center;gap:2rem;margin-bottom:2rem;flex-wrap:wrap}.stat-item{text-align:center}.stat-value{font-family:var(--font-display);font-size:2rem;color:var(--accent)}.stat-label{font-size:0.85rem;color:var(--text-muted)}.next-module-banner{background:linear-gradient(135deg,var(--accent),var(--gold));border-radius:16px;padding:2rem;text-align:center;margin-top:2rem;color:white}.next-module-banner h3{font-family:var(--font-display);font-size:1.5rem;margin-bottom:0.5rem}.next-module-banner p{margin-bottom:1rem;opacity:0.9}.next-module-banner .btn{background:white;color:var(--accent)}.hidden{display:none!important}@media(max-width:640px){.progress-container{padding:0.875rem 1rem}main{padding:1.5rem 1rem 3rem}.lesson-card,.quiz-section{padding:1.5rem;border-radius:12px}.topic-tab{padding:0.5rem 0.75rem;font-size:0.8rem}.nav-buttons{flex-direction:column}.nav-buttons .btn,.quiz-actions .btn{width:100%}.quiz-actions{flex-direction:column}.stat-grid{grid-template-columns:1fr 1fr}}`;
        const infoIcon='<svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>';
        const quizIcon='<svg viewBox="0 0 24 24"><path d="M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/></svg>';
        const checkIcon='<svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>';
        const arrowR='<svg viewBox="0 0 24 24"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/></svg>';
        const arrowL='<svg viewBox="0 0 24 24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>';
        this.shadowRoot.innerHTML='<style>'+styles+'</style>'+this.getHTML(infoIcon,quizIcon,checkIcon,arrowR,arrowL);
    }
    getHTML(info,quiz,check,arrowR,arrowL){
        return '<div class="wrapper"><div class="progress-container"><div class="progress-wrapper"><div class="progress-header"><span class="progress-label">Module 1: The Retention Mindset</span><span class="progress-text" id="progressText">0% Complete</span></div><div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div></div></div><main><div class="module-header"><div class="breadcrumb"><a href="https://www.opticalowners.com">Home</a><span>></span><a href="https://www.opticalowners.com/training">Customer Retention</a><span>></span><span>Module 1</span></div><h1 class="module-title">Module 1: The Retention Mindset</h1><p class="module-description">Discover why keeping existing patients is more valuable than constantly chasing new ones. Build a foundation for long-term practice success.</p></div><div class="topic-nav" id="topicNav"><button class="topic-tab active" data-topic="1">1. Why Retention Matters</button><button class="topic-tab" data-topic="2">2. Economics of Loyalty</button><button class="topic-tab" data-topic="3">3. Retention vs Acquisition</button><button class="topic-tab" data-topic="4">4. Patient Journey</button><button class="topic-tab" data-topic="5">5. Building Culture</button><button class="topic-tab" data-topic="final">Final Quiz</button></div>'+this.getTopic1(info,quiz,check,arrowR,arrowL)+this.getTopic2(info,quiz,check,arrowR,arrowL)+this.getTopic3(info,quiz,check,arrowR,arrowL)+this.getTopic4(info,quiz,check,arrowR,arrowL)+this.getTopic5(info,quiz,check,arrowR,arrowL)+this.getFinalQuiz(quiz,check,arrowR,arrowL)+'</main></div>';
    }
    getTopic1(info,quiz,check,arrowR,arrowL){
        return '<div class="topic-content active" id="topic-1"><div class="lesson-card"><h2>Why Retention Matters</h2><p>In optical retail, we often focus on getting new patients through the door. But the most successful practices know a secret: the real profit is in keeping the patients you already have.</p><h3>The Retention Reality</h3><div class="stat-grid"><div class="stat-box"><div class="stat-value">5-25x</div><div class="stat-label">More expensive to acquire vs retain</div></div><div class="stat-box"><div class="stat-value">65%</div><div class="stat-label">Business from existing customers</div></div><div class="stat-box"><div class="stat-value">5%</div><div class="stat-label">Retention boost = 25-95% profit increase</div></div><div class="stat-box"><div class="stat-value">67%</div><div class="stat-label">More spending by repeat customers</div></div></div><div class="key-point"><strong>Key Insight</strong>A loyal patient who visits for 20 years could be worth $10,000+ to your practice. Losing them over a $50 issue is incredibly costly.</div><h3>Why Patients Leave</h3><ul><li><strong>68% - Perceived indifference</strong> (feeling the practice does not care)</li><li><strong>14% - Dissatisfaction</strong> (something specific went wrong)</li><li><strong>9% - Competitive reasons</strong> (price or convenience)</li><li><strong>5% - Other relationships</strong> (friend/family in industry)</li><li><strong>3% - Move away</strong></li><li><strong>1% - Death</strong></li></ul><p>The vast majority leave for reasons within your control - especially perceived indifference.</p><div class="tip-box">'+info+'<div><strong>Pro Tip:</strong> Calculate your patient lifetime value. If the average patient stays 10 years and spends $400/year, each patient is worth $4,000.</div></div></div><div class="quiz-section" data-quiz="1"><div class="quiz-header"><div class="quiz-icon">'+quiz+'</div><div><div class="quiz-title">Knowledge Check</div><div class="quiz-subtitle">3 questions</div></div></div><div class="quiz-questions"><div class="question" data-correct="2"><div class="question-text"><span class="question-number">1.</span> How much more expensive is it to acquire vs retain a customer?</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">2-3 times more</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">5-25 times more</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">About the same</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">50 times more</span></div></div><div class="feedback"></div></div><div class="question" data-correct="1"><div class="question-text"><span class="question-number">2.</span> What is the #1 reason patients leave?</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Perceived indifference</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Finding cheaper prices</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Moving away</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Product quality</span></div></div><div class="feedback"></div></div><div class="question" data-correct="3"><div class="question-text"><span class="question-number">3.</span> A 5% retention increase can boost profits by:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">5-10%</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">10-15%</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">25-95%</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">100%+</span></div></div><div class="feedback"></div></div></div><div class="quiz-results"><div class="results-icon">'+check+'</div><h3 class="results-title">Quiz Complete!</h3><p class="results-score"></p></div><div class="quiz-actions"><button class="btn btn-primary submit-quiz">Check Answers</button><button class="btn btn-secondary retry-quiz hidden">Try Again</button></div></div><div class="nav-buttons"><div></div><button class="btn btn-primary next-topic" data-next="2">Next: Economics of Loyalty '+arrowR+'</button></div></div>';
    }
    getTopic2(info,quiz,check,arrowR,arrowL){
        return '<div class="topic-content" id="topic-2"><div class="lesson-card"><h2>The Economics of Loyalty</h2><p>Understanding the financial impact of loyal patients transforms how you approach every interaction.</p><h3>Calculating Patient Lifetime Value (PLV)</h3><p><strong>PLV = Average Annual Spend x Years as Patient x Referral Factor</strong></p><p>Example: $450 x 12 years x 1.3 = <strong>$7,020</strong></p><div class="key-point"><strong>Key Insight</strong>When you see a patient, you are looking at a potential $7,000+ relationship - not a $450 transaction. This changes how you handle problems.</div><h3>The Compound Effect</h3><p>Small retention improvements create massive results. A 5% improvement (80% to 85%) over 5 years means 116 more long-term patients - potentially $800,000+ in lifetime value!</p><h3>The Referral Multiplier</h3><ul><li>Satisfied patients tell 4-6 people</li><li>Referred patients have 16% higher lifetime value</li><li>Referred patients have 37% higher retention</li><li>92% trust referrals from people they know</li></ul><h3>Cost of Poor Retention</h3><ul><li><strong>Lost direct revenue</strong> - future purchases elsewhere</li><li><strong>Lost referrals</strong> - they will not recommend you</li><li><strong>Negative word-of-mouth</strong> - unhappy patients tell 9-15 people</li><li><strong>Replacement cost</strong> - marketing to find new patients</li></ul><div class="tip-box">'+info+'<div><strong>Pro Tip:</strong> Post your PLV where staff can see it. When everyone knows a patient is worth $7,000, a $50 adjustment becomes an obvious investment.</div></div></div><div class="quiz-section" data-quiz="2"><div class="quiz-header"><div class="quiz-icon">'+quiz+'</div><div><div class="quiz-title">Knowledge Check</div><div class="quiz-subtitle">3 questions</div></div></div><div class="quiz-questions"><div class="question" data-correct="2"><div class="question-text"><span class="question-number">1.</span> What does Patient Lifetime Value measure?</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Cost of a single transaction</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Total revenue over entire relationship</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Annual insurance benefits</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Marketing costs</span></div></div><div class="feedback"></div></div><div class="question" data-correct="4"><div class="question-text"><span class="question-number">2.</span> Referred patients have what advantage?</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Lower spending</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Worse insurance</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">More complaints</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Higher LTV and better retention</span></div></div><div class="feedback"></div></div><div class="question" data-correct="1"><div class="question-text"><span class="question-number">3.</span> How many people do unhappy patients tell?</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">9-15 people</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">1-2 people</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">No one</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Only online</span></div></div><div class="feedback"></div></div></div><div class="quiz-results"><div class="results-icon">'+check+'</div><h3 class="results-title">Quiz Complete!</h3><p class="results-score"></p></div><div class="quiz-actions"><button class="btn btn-primary submit-quiz">Check Answers</button><button class="btn btn-secondary retry-quiz hidden">Try Again</button></div></div><div class="nav-buttons"><button class="btn btn-secondary prev-topic" data-prev="1">'+arrowL+' Previous</button><button class="btn btn-primary next-topic" data-next="3">Next: Retention vs Acquisition '+arrowR+'</button></div></div>';
    }
    getTopic3(info,quiz,check,arrowR,arrowL){
        return '<div class="topic-content" id="topic-3"><div class="lesson-card"><h2>Retention vs. Acquisition</h2><p>Most practices spend the majority of their budget on acquisition. But over-focusing on new patients while neglecting retention is like filling a leaky bucket.</p><h3>The Leaky Bucket Problem</h3><ul><li>Add 100 new patients, lose 80 existing = net growth of 20</li><li>Add 50 new patients, lose only 20 = net growth of 30</li><li>Second scenario costs less and builds stability</li></ul><div class="key-point"><strong>Key Insight</strong>Fixing the leak (retention) is often more cost-effective than pouring faster (acquisition). Yet most practices spend 80% on acquisition, only 20% on retention.</div><h3>When to Focus on Each</h3><p><strong>Prioritize Acquisition:</strong> New practice, expanded capacity, new market, retention already 85%+</p><p><strong>Prioritize Retention:</strong> Patient base shrinking, getting complaints, low return rates, declining referrals</p><h3>Healthy Balance</h3><ul><li>15-25% of patients should be new each year</li><li>80%+ of existing patients should return</li><li>30%+ of new patients from referrals</li></ul><div class="tip-box">'+info+'<div><strong>Pro Tip:</strong> Track both metrics monthly. If returning rate drops below 75%, pause acquisition and focus on understanding why.</div></div></div><div class="quiz-section" data-quiz="3"><div class="quiz-header"><div class="quiz-icon">'+quiz+'</div><div><div class="quiz-title">Knowledge Check</div><div class="quiz-subtitle">3 questions</div></div></div><div class="quiz-questions"><div class="question" data-correct="3"><div class="question-text"><span class="question-number">1.</span> What is the "leaky bucket" problem?</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Plumbing issues</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Cash flow problems</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Losing patients while acquiring new ones</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Staff turnover</span></div></div><div class="feedback"></div></div><div class="question" data-correct="2"><div class="question-text"><span class="question-number">2.</span> What is a healthy retention rate?</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">50%+</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">80%+</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">95%+</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">100%</span></div></div><div class="feedback"></div></div><div class="question" data-correct="4"><div class="question-text"><span class="question-number">3.</span> When should you prioritize retention?</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Brand new practice</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Too many patients</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Never</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">When patients are not returning</span></div></div><div class="feedback"></div></div></div><div class="quiz-results"><div class="results-icon">'+check+'</div><h3 class="results-title">Quiz Complete!</h3><p class="results-score"></p></div><div class="quiz-actions"><button class="btn btn-primary submit-quiz">Check Answers</button><button class="btn btn-secondary retry-quiz hidden">Try Again</button></div></div><div class="nav-buttons"><button class="btn btn-secondary prev-topic" data-prev="2">'+arrowL+' Previous</button><button class="btn btn-primary next-topic" data-next="4">Next: Patient Journey '+arrowR+'</button></div></div>';
    }
    getTopic4(info,quiz,check,arrowR,arrowL){
        return '<div class="topic-content" id="topic-4"><div class="lesson-card"><h2>The Patient Journey</h2><p>Retention is not a single moment - it is shaped by every interaction across the entire journey.</p><h3>Five Stages</h3><p><strong>1. Awareness</strong> - Discover your practice (search, referral, advertising)</p><p><strong>2. Consideration</strong> - Evaluate you (reviews, website, phone call)</p><p><strong>3. Experience</strong> - The visit (exam, selection, checkout)</p><p><strong>4. Post-Purchase</strong> - After leaving (wearing glasses, adjustments)</p><p><strong>5. Loyalty</strong> - Ongoing relationship (recalls, communication)</p><div class="key-point"><strong>Key Insight</strong>Most practices focus heavily on Stage 3 but neglect Stages 4 and 5. Yet post-purchase and loyalty phases are where long-term retention is built.</div><h3>Mapping Touchpoints</h3><ul><li><strong>Pre-visit:</strong> Website, phone, reminder, parking</li><li><strong>Check-in:</strong> Greeting, paperwork, wait time</li><li><strong>Exam:</strong> Tech interaction, doctor, explanation</li><li><strong>Optical:</strong> Frame selection, recommendations</li><li><strong>Checkout:</strong> Payment, pickup scheduling</li><li><strong>Post-visit:</strong> Thank you, pickup, adjustments</li><li><strong>Between visits:</strong> Recalls, birthday messages</li></ul><div class="tip-box">'+info+'<div><strong>Pro Tip:</strong> Mystery shop your own practice. Have a friend go through the entire journey and give honest feedback.</div></div></div><div class="quiz-section" data-quiz="4"><div class="quiz-header"><div class="quiz-icon">'+quiz+'</div><div><div class="quiz-title">Knowledge Check</div><div class="quiz-subtitle">3 questions</div></div></div><div class="quiz-questions"><div class="question" data-correct="3"><div class="question-text"><span class="question-number">1.</span> Which journey stage is most neglected?</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Awareness</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">The visit</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Post-purchase and Loyalty</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Consideration</span></div></div><div class="feedback"></div></div><div class="question" data-correct="2"><div class="question-text"><span class="question-number">2.</span> What is a "touchpoint"?</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Physical contact only</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Any interaction affecting perception</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">The checkout counter</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Face-to-face meetings only</span></div></div><div class="feedback"></div></div><div class="question" data-correct="1"><div class="question-text"><span class="question-number">3.</span> How can you find weak points in your journey?</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Mystery shop your own practice</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Assume everything is fine</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Only listen to positive feedback</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Copy competitors</span></div></div><div class="feedback"></div></div></div><div class="quiz-results"><div class="results-icon">'+check+'</div><h3 class="results-title">Quiz Complete!</h3><p class="results-score"></p></div><div class="quiz-actions"><button class="btn btn-primary submit-quiz">Check Answers</button><button class="btn btn-secondary retry-quiz hidden">Try Again</button></div></div><div class="nav-buttons"><button class="btn btn-secondary prev-topic" data-prev="3">'+arrowL+' Previous</button><button class="btn btn-primary next-topic" data-next="5">Next: Building Culture '+arrowR+'</button></div></div>';
    }
    getTopic5(info,quiz,check,arrowR,arrowL){
        return '<div class="topic-content" id="topic-5"><div class="lesson-card"><h2>Building a Retention Culture</h2><p>Retention is not just a strategy - it is a culture. When everyone thinks "retention first," it becomes automatic.</p><h3>What It Looks Like</h3><ul><li>Everyone understands patient lifetime value</li><li>Problems are opportunities to strengthen relationships</li><li>Staff empowered to make things right</li><li>Follow-up is systematic, not optional</li><li>Patient satisfaction is measured regularly</li><li>"Would this make them want to come back?" is constant</li></ul><div class="key-point"><strong>Key Insight</strong>Culture comes from leadership. If the owner treats retention as priority, staff will too. If leadership only talks about new patient numbers, that is what staff will focus on.</div><h3>Creating the Shift</h3><p><strong>1. Share the why:</strong> Educate on PLV, share retention stats</p><p><strong>2. Empower your team:</strong> Authority to resolve issues, celebrate retention wins</p><p><strong>3. Measure what matters:</strong> Track return rates, satisfaction scores, referrals</p><p><strong>4. Systematize:</strong> Standard follow-up procedures, retention in job descriptions</p><h3>Daily Habits</h3><ul><li><strong>Morning:</strong> Review yesterday patients for follow-ups</li><li><strong>Each interaction:</strong> Use name, eye contact, smile</li><li><strong>Problems:</strong> Own them, solve them, confirm resolution</li><li><strong>Checkout:</strong> Schedule next appointment before they leave</li></ul><div class="tip-box">'+info+'<div><strong>Pro Tip:</strong> Start each week with a "retention win" story. Share examples of staff who went above and beyond. What gets celebrated gets repeated.</div></div></div><div class="quiz-section" data-quiz="5"><div class="quiz-header"><div class="quiz-icon">'+quiz+'</div><div><div class="quiz-title">Knowledge Check</div><div class="quiz-subtitle">3 questions</div></div></div><div class="quiz-questions"><div class="question" data-correct="2"><div class="question-text"><span class="question-number">1.</span> Where does retention culture come from?</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">New software</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Leadership prioritizing it</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Hiring consultants</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">It is automatic</span></div></div><div class="feedback"></div></div><div class="question" data-correct="3"><div class="question-text"><span class="question-number">2.</span> What should staff be empowered to do?</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Nothing without approval</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Give unlimited freebies</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Resolve issues within a dollar limit</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Ignore complaints</span></div></div><div class="feedback"></div></div><div class="question" data-correct="1"><div class="question-text"><span class="question-number">3.</span> What is a good weekly meeting practice?</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Share retention win stories</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Only discuss sales numbers</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Skip meetings</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Focus only on problems</span></div></div><div class="feedback"></div></div></div><div class="quiz-results"><div class="results-icon">'+check+'</div><h3 class="results-title">Quiz Complete!</h3><p class="results-score"></p></div><div class="quiz-actions"><button class="btn btn-primary submit-quiz">Check Answers</button><button class="btn btn-secondary retry-quiz hidden">Try Again</button></div></div><div class="nav-buttons"><button class="btn btn-secondary prev-topic" data-prev="4">'+arrowL+' Previous</button><button class="btn btn-primary next-topic" data-next="final">Take Final Quiz '+arrowR+'</button></div></div>';
    }
    getFinalQuiz(quiz,check,arrowR,arrowL){
        return '<div class="topic-content" id="topic-final"><div class="quiz-section"><div class="final-quiz-intro" id="finalQuizIntro"><h2>Module 1 Final Quiz</h2><p>Test your understanding of the retention mindset. You need 70% to pass.</p><div class="final-quiz-stats"><div class="stat-item"><div class="stat-value">10</div><div class="stat-label">Questions</div></div><div class="stat-item"><div class="stat-value">70%</div><div class="stat-label">Passing Score</div></div></div><button class="btn btn-primary" id="startFinalQuiz">Start Final Quiz</button></div><div class="hidden" id="finalQuizContent"><div class="quiz-header"><div class="quiz-icon">'+quiz+'</div><div><div class="quiz-title">Final Quiz</div><div class="quiz-subtitle">10 questions</div></div></div><div class="quiz-questions"><div class="question" data-correct="2"><div class="question-text"><span class="question-number">1.</span> Acquiring a new customer costs how much more than retaining one?</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">2-3x</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">5-25x</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Same</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Less</span></div></div><div class="feedback"></div></div><div class="question" data-correct="1"><div class="question-text"><span class="question-number">2.</span> The #1 reason patients leave is:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Perceived indifference</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Price</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Moving</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Quality</span></div></div><div class="feedback"></div></div><div class="question" data-correct="3"><div class="question-text"><span class="question-number">3.</span> PLV measures:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Single transaction</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Annual revenue</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Total revenue over relationship</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Insurance coverage</span></div></div><div class="feedback"></div></div><div class="question" data-correct="4"><div class="question-text"><span class="question-number">4.</span> Referred patients have:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Lower LTV</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Worse retention</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">More complaints</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Higher LTV and better retention</span></div></div><div class="feedback"></div></div><div class="question" data-correct="2"><div class="question-text"><span class="question-number">5.</span> The "leaky bucket" means:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Plumbing issues</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Losing patients while acquiring new ones</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Cash flow</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Staff turnover</span></div></div><div class="feedback"></div></div><div class="question" data-correct="1"><div class="question-text"><span class="question-number">6.</span> Healthy retention rate is:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">80%+</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">50%</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">25%</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">100%</span></div></div><div class="feedback"></div></div><div class="question" data-correct="3"><div class="question-text"><span class="question-number">7.</span> Most neglected journey stage:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Awareness</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">The visit</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Post-purchase/Loyalty</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Consideration</span></div></div><div class="feedback"></div></div><div class="question" data-correct="2"><div class="question-text"><span class="question-number">8.</span> A touchpoint is:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Physical contact only</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Any interaction affecting perception</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Checkout counter</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">In-person only</span></div></div><div class="feedback"></div></div><div class="question" data-correct="1"><div class="question-text"><span class="question-number">9.</span> Retention culture comes from:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Leadership prioritizing it</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">New software</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Consultants</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Automatic</span></div></div><div class="feedback"></div></div><div class="question" data-correct="3"><div class="question-text"><span class="question-number">10.</span> Staff should be empowered to:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Nothing without approval</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Ignore complaints</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Resolve issues within a limit</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Unlimited refunds</span></div></div><div class="feedback"></div></div></div><div class="quiz-results" id="finalQuizResults"><div class="results-icon">'+check+'</div><h3 class="results-title"></h3><p class="results-score"></p></div><div class="quiz-actions"><button class="btn btn-primary" id="submitFinalQuiz">Submit Final Quiz</button><button class="btn btn-secondary hidden" id="retryFinalQuiz">Try Again</button><a href="https://www.opticalowners.com/training" class="btn btn-primary hidden" id="nextModule">Next Module '+arrowR+'</a></div></div></div><div class="nav-buttons"><button class="btn btn-secondary prev-topic" data-prev="5">'+arrowL+' Back to Topics</button><div></div></div></div>';
    }
    initializeComponent(){var shadow=this.shadowRoot;var self=this;var state={completed:[],current:1};var totalTopics=5;function updateProgress(){var pct=Math.round((state.completed.length/(totalTopics+1))*100);shadow.getElementById('progressFill').style.width=pct+'%';shadow.getElementById('progressText').textContent=pct+'% Complete'}function markTopicComplete(num){if(state.completed.indexOf(num)===-1){state.completed.push(num);updateProgress()}var tabs=shadow.querySelectorAll('.topic-tab');for(var i=0;i<tabs.length;i++){if(tabs[i].getAttribute('data-topic')===String(num)&&num!=='final'){tabs[i].classList.add('completed')}}}function showTopic(id){var contents=shadow.querySelectorAll('.topic-content');for(var i=0;i<contents.length;i++){contents[i].classList.remove('active')}var tabs=shadow.querySelectorAll('.topic-tab');for(var i=0;i<tabs.length;i++){tabs[i].classList.remove('active')}shadow.getElementById('topic-'+id).classList.add('active');var targetTabs=shadow.querySelectorAll('.topic-tab');for(var i=0;i<targetTabs.length;i++){if(targetTabs[i].getAttribute('data-topic')===String(id)){targetTabs[i].classList.add('active')}}state.current=id;self.scrollIntoView({behavior:'smooth',block:'start'})}var topicTabs=shadow.querySelectorAll('.topic-tab');for(var i=0;i<topicTabs.length;i++){(function(tab){tab.addEventListener('click',function(){showTopic(tab.getAttribute('data-topic'))})})(topicTabs[i])}var nextBtns=shadow.querySelectorAll('.next-topic');for(var i=0;i<nextBtns.length;i++){(function(btn){btn.addEventListener('click',function(){showTopic(btn.getAttribute('data-next'))})})(nextBtns[i])}var prevBtns=shadow.querySelectorAll('.prev-topic');for(var i=0;i<prevBtns.length;i++){(function(btn){btn.addEventListener('click',function(){showTopic(btn.getAttribute('data-prev'))})})(prevBtns[i])}var quizSections=shadow.querySelectorAll('.quiz-section[data-quiz]');for(var q=0;q<quizSections.length;q++){(function(quiz){var questions=quiz.querySelectorAll('.question');var submitBtn=quiz.querySelector('.submit-quiz');var retryBtn=quiz.querySelector('.retry-quiz');var resultsDiv=quiz.querySelector('.quiz-results');if(!submitBtn)return;for(var j=0;j<questions.length;j++){(function(question){var options=question.querySelectorAll('.option');for(var k=0;k<options.length;k++){(function(opt){opt.addEventListener('click',function(){if(question.classList.contains('answered'))return;var allOpts=question.querySelectorAll('.option');for(var m=0;m<allOpts.length;m++){allOpts[m].classList.remove('selected')}opt.classList.add('selected')})})(options[k])}})(questions[j])}submitBtn.addEventListener('click',function(){var correct=0;for(var j=0;j<questions.length;j++){var q2=questions[j];q2.classList.add('answered');var correctAns=q2.getAttribute('data-correct');var selected=q2.querySelector('.option.selected');var feedback=q2.querySelector('.feedback');if(selected){if(selected.getAttribute('data-option')===correctAns){correct++;selected.classList.add('correct');feedback.textContent='Correct!';feedback.className='feedback show correct'}else{selected.classList.add('incorrect');var correctOpts=q2.querySelectorAll('.option');for(var m=0;m<correctOpts.length;m++){if(correctOpts[m].getAttribute('data-option')===correctAns){correctOpts[m].classList.add('correct')}}feedback.textContent='Incorrect';feedback.className='feedback show incorrect'}}else{var correctOpts2=q2.querySelectorAll('.option');for(var m=0;m<correctOpts2.length;m++){if(correctOpts2[m].getAttribute('data-option')===correctAns){correctOpts2[m].classList.add('correct')}}feedback.textContent='No answer selected';feedback.className='feedback show incorrect'}}var total=questions.length;var pct=Math.round((correct/total)*100);var passed=pct>=70;resultsDiv.querySelector('.results-score').textContent='You scored '+correct+'/'+total+' ('+pct+'%)';resultsDiv.querySelector('.results-icon').className='results-icon '+(passed?'pass':'fail');resultsDiv.querySelector('.results-title').textContent=passed?'Great Job!':'Keep Practicing';resultsDiv.classList.add('show');submitBtn.classList.add('hidden');retryBtn.classList.remove('hidden');if(passed){var quizNum=quiz.getAttribute('data-quiz');if(quizNum)markTopicComplete(parseInt(quizNum))}});retryBtn.addEventListener('click',function(){for(var j=0;j<questions.length;j++){questions[j].classList.remove('answered');var opts=questions[j].querySelectorAll('.option');for(var k=0;k<opts.length;k++){opts[k].classList.remove('selected','correct','incorrect')}questions[j].querySelector('.feedback').className='feedback'}resultsDiv.classList.remove('show');retryBtn.classList.add('hidden');submitBtn.classList.remove('hidden')})})(quizSections[q])}var startFinalBtn=shadow.getElementById('startFinalQuiz');var finalQuizIntro=shadow.getElementById('finalQuizIntro');var finalQuizContent=shadow.getElementById('finalQuizContent');var submitFinalBtn=shadow.getElementById('submitFinalQuiz');var retryFinalBtn=shadow.getElementById('retryFinalQuiz');var nextModuleBtn=shadow.getElementById('nextModule');var finalResults=shadow.getElementById('finalQuizResults');if(startFinalBtn){startFinalBtn.addEventListener('click',function(){finalQuizIntro.classList.add('hidden');finalQuizContent.classList.remove('hidden')})}if(submitFinalBtn){var finalQuestions=finalQuizContent.querySelectorAll('.question');for(var i=0;i<finalQuestions.length;i++){(function(question){var options=question.querySelectorAll('.option');for(var k=0;k<options.length;k++){(function(opt){opt.addEventListener('click',function(){if(question.classList.contains('answered'))return;var allOpts=question.querySelectorAll('.option');for(var m=0;m<allOpts.length;m++){allOpts[m].classList.remove('selected')}opt.classList.add('selected')})})(options[k])}})(finalQuestions[i])}submitFinalBtn.addEventListener('click',function(){var correct=0;for(var j=0;j<finalQuestions.length;j++){var q2=finalQuestions[j];q2.classList.add('answered');var correctAns=q2.getAttribute('data-correct');var selected=q2.querySelector('.option.selected');var feedback=q2.querySelector('.feedback');if(selected){if(selected.getAttribute('data-option')===correctAns){correct++;selected.classList.add('correct');feedback.textContent='Correct!';feedback.className='feedback show correct'}else{selected.classList.add('incorrect');var correctOpts=q2.querySelectorAll('.option');for(var m=0;m<correctOpts.length;m++){if(correctOpts[m].getAttribute('data-option')===correctAns){correctOpts[m].classList.add('correct')}}feedback.textContent='Incorrect';feedback.className='feedback show incorrect'}}else{var correctOpts2=q2.querySelectorAll('.option');for(var m=0;m<correctOpts2.length;m++){if(correctOpts2[m].getAttribute('data-option')===correctAns){correctOpts2[m].classList.add('correct')}}feedback.textContent='No answer selected';feedback.className='feedback show incorrect'}}var pct=Math.round((correct/10)*100);var passed=pct>=70;finalResults.querySelector('.results-score').textContent='You scored '+correct+'/10 ('+pct+'%)';finalResults.querySelector('.results-icon').className='results-icon '+(passed?'pass':'fail');finalResults.querySelector('.results-title').textContent=passed?'Module Complete!':'Not Quite';finalResults.classList.add('show');submitFinalBtn.classList.add('hidden');if(passed){markTopicComplete('final');nextModuleBtn.classList.remove('hidden')}else{retryFinalBtn.classList.remove('hidden')}});retryFinalBtn.addEventListener('click',function(){for(var j=0;j<finalQuestions.length;j++){finalQuestions[j].classList.remove('answered');var opts=finalQuestions[j].querySelectorAll('.option');for(var k=0;k<opts.length;k++){opts[k].classList.remove('selected','correct','incorrect')}finalQuestions[j].querySelector('.feedback').className='feedback'}finalResults.classList.remove('show');retryFinalBtn.classList.add('hidden');submitFinalBtn.classList.remove('hidden')})}updateProgress()}
    disconnectedCallback(){if(this.shadowRoot){this.shadowRoot.innerHTML=''}}
}
customElements.define('retention-module-1',RetentionModule1);
