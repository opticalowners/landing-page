<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 5: Loyalty & Referral Programs | Customer Retention | OpticalOwners</title>
    <meta name="description" content="Build loyalty programs and referral systems that turn satisfied patients into active advocates for your practice.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>:root{--font-display:'DM Serif Display',Georgia,serif;--font-body:'Plus Jakarta Sans',sans-serif;--bg-primary:#faf9f7;--bg-secondary:#fff;--bg-tertiary:#f5f3ef;--text-primary:#0a1628;--text-secondary:#4b5563;--text-muted:#6b7280;--border-color:#e5e7eb;--accent:#10b981;--accent-dark:#059669;--accent-light:rgba(16,185,129,0.1);--gold:#d4a853;--green:#10b981;--green-light:rgba(16,185,129,0.1);--red:#ef4444;--red-light:rgba(239,68,68,0.1)}[data-theme="dark"]{--bg-primary:#0a1628;--bg-secondary:#142238;--bg-tertiary:#1e3a5f;--text-primary:#f9fafb;--text-secondary:#d1d5db;--text-muted:#9ca3af;--border-color:#374151;--accent-light:rgba(16,185,129,0.2);--green-light:rgba(16,185,129,0.2);--red-light:rgba(239,68,68,0.2)}*{margin:0;padding:0;box-sizing:border-box}body{font-family:var(--font-body);background:var(--bg-primary);color:var(--text-secondary);line-height:1.7}header{background:var(--bg-secondary);border-bottom:1px solid var(--border-color);padding:1rem 1.5rem;position:sticky;top:0;z-index:100}.header-container{max-width:900px;margin:0 auto;display:flex;justify-content:space-between;align-items:center}.logo{display:flex;align-items:center;gap:.5rem;text-decoration:none;color:var(--text-primary)}.logo-icon{width:36px;height:36px;background:linear-gradient(135deg,var(--accent),var(--accent-dark));border-radius:8px;display:flex;align-items:center;justify-content:center}.logo-icon svg{width:20px;height:20px;fill:#fff}.logo-text{font-family:var(--font-display);font-size:1.2rem}.theme-toggle{background:var(--bg-tertiary);border:1px solid var(--border-color);border-radius:8px;padding:.5rem;cursor:pointer}.theme-toggle svg{width:20px;height:20px;fill:var(--text-secondary)}.theme-toggle .sun{display:none}[data-theme="dark"] .theme-toggle .sun{display:block}[data-theme="dark"] .theme-toggle .moon{display:none}.progress-container{background:var(--bg-secondary);border-bottom:1px solid var(--border-color);padding:1rem 1.5rem}.progress-wrapper{max-width:900px;margin:0 auto}.progress-header{display:flex;justify-content:space-between;margin-bottom:.5rem}.progress-label{font-size:.85rem;font-weight:600;color:var(--text-primary)}.progress-text{font-size:.85rem;color:var(--text-muted)}.progress-bar{height:8px;background:var(--bg-tertiary);border-radius:10px;overflow:hidden}.progress-fill{height:100%;background:linear-gradient(90deg,var(--accent),var(--gold));border-radius:10px;transition:width .5s;width:0}main{max-width:900px;margin:0 auto;padding:2rem 1.5rem 4rem}.module-header{margin-bottom:2rem}.breadcrumb{display:flex;align-items:center;gap:.5rem;font-size:.85rem;color:var(--text-muted);margin-bottom:1rem;flex-wrap:wrap}.breadcrumb a{color:var(--accent);text-decoration:none}.module-title{font-family:var(--font-display);font-size:clamp(1.75rem,5vw,2.5rem);color:var(--text-primary);margin-bottom:.5rem}.module-description{font-size:1.1rem}.topic-nav{display:flex;gap:.5rem;margin-bottom:2rem;overflow-x:auto;padding-bottom:.5rem}.topic-tab{flex-shrink:0;padding:.6rem 1rem;background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;font-size:.85rem;font-weight:500;color:var(--text-secondary);cursor:pointer;transition:all .3s}.topic-tab:hover{border-color:var(--accent);color:var(--accent)}.topic-tab.active{background:var(--accent);border-color:var(--accent);color:#fff}.topic-tab.completed{background:var(--green-light);border-color:var(--green);color:var(--green)}.topic-content{display:none;animation:fadeIn .4s}.topic-content.active{display:block}@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.lesson-card{background:var(--bg-secondary);border-radius:16px;padding:2rem;margin-bottom:2rem;border:1px solid var(--border-color)}.lesson-card h2{font-family:var(--font-display);font-size:1.5rem;color:var(--text-primary);margin-bottom:1.5rem}.lesson-card h3{font-size:1.1rem;color:var(--text-primary);margin:1.5rem 0 .75rem}.lesson-card p{margin-bottom:1rem}.lesson-card ul,.lesson-card ol{margin:1rem 0 1rem 1.5rem}.lesson-card li{margin-bottom:.5rem}.key-point{background:var(--accent-light);border-left:4px solid var(--accent);padding:1rem 1.25rem;border-radius:0 10px 10px 0;margin:1.5rem 0}.key-point strong{color:var(--accent);display:block;margin-bottom:.25rem}.tip-box{background:var(--bg-tertiary);border-radius:10px;padding:1rem 1.25rem;margin:1.5rem 0;display:flex;gap:.75rem}.tip-box svg{width:24px;height:24px;fill:var(--gold);flex-shrink:0}.quiz-section{background:var(--bg-secondary);border-radius:16px;padding:2rem;border:1px solid var(--border-color)}.quiz-header{display:flex;align-items:center;gap:.75rem;margin-bottom:1.5rem}.quiz-icon{width:48px;height:48px;background:var(--accent-light);border-radius:12px;display:flex;align-items:center;justify-content:center}.quiz-icon svg{width:24px;height:24px;fill:var(--accent)}.quiz-title{font-family:var(--font-display);font-size:1.25rem;color:var(--text-primary)}.quiz-subtitle{font-size:.9rem;color:var(--text-muted)}.question{margin-bottom:1.5rem;padding-bottom:1.5rem;border-bottom:1px solid var(--border-color)}.question:last-of-type{border-bottom:none;margin-bottom:0;padding-bottom:0}.question-text{font-weight:600;color:var(--text-primary);margin-bottom:1rem}.question-number{color:var(--accent);margin-right:.5rem}.options{display:flex;flex-direction:column;gap:.5rem}.option{display:flex;align-items:center;gap:.75rem;padding:1rem;background:var(--bg-tertiary);border:2px solid transparent;border-radius:10px;cursor:pointer;transition:all .2s}.option:hover{border-color:var(--accent)}.option.selected{border-color:var(--accent);background:var(--accent-light)}.option.correct{border-color:var(--green);background:var(--green-light)}.option.incorrect{border-color:var(--red);background:var(--red-light)}.option-radio{width:20px;height:20px;border:2px solid var(--text-muted);border-radius:50%;flex-shrink:0;position:relative}.option.selected .option-radio{border-color:var(--accent);background:var(--accent)}.option.correct .option-radio{border-color:var(--green);background:var(--green)}.option.incorrect .option-radio{border-color:var(--red);background:var(--red)}.option.selected .option-radio::after,.option.correct .option-radio::after,.option.incorrect .option-radio::after{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:8px;height:8px;background:#fff;border-radius:50%}.feedback{display:none;padding:1rem;border-radius:10px;margin-top:.75rem;font-size:.9rem}.feedback.show{display:block}.feedback.correct{background:var(--green-light);color:var(--green)}.feedback.incorrect{background:var(--red-light);color:var(--red)}.quiz-results{display:none;text-align:center;padding:2rem 0}.quiz-results.show{display:block}.results-icon{width:80px;height:80px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 1.5rem}.results-icon.pass{background:var(--green-light)}.results-icon.fail{background:var(--red-light)}.results-icon svg{width:40px;height:40px}.results-icon.pass svg{fill:var(--green)}.results-icon.fail svg{fill:var(--red)}.results-title{font-family:var(--font-display);font-size:1.5rem;color:var(--text-primary);margin-bottom:.5rem}.results-score{font-size:1.1rem;color:var(--text-secondary);margin-bottom:1.5rem}.btn{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.875rem 1.75rem;border-radius:10px;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s;border:none;text-decoration:none;font-family:var(--font-body)}.btn-primary{background:linear-gradient(135deg,var(--accent),var(--accent-dark));color:#fff}.btn-primary:hover{transform:translateY(-2px)}.btn-secondary{background:var(--bg-tertiary);color:var(--text-primary);border:1px solid var(--border-color)}.btn-secondary:hover{border-color:var(--accent);color:var(--accent)}.btn svg{width:20px;height:20px;fill:currentColor}.quiz-actions{display:flex;gap:1rem;margin-top:1.5rem;flex-wrap:wrap}.nav-buttons{display:flex;justify-content:space-between;gap:1rem;margin-top:2rem;padding-top:2rem;border-top:1px solid var(--border-color)}.final-quiz-intro{text-align:center;padding:3rem 1rem}.final-quiz-intro h2{font-family:var(--font-display);font-size:2rem;color:var(--text-primary);margin-bottom:1rem}.final-quiz-intro p{color:var(--text-secondary);margin-bottom:2rem}.final-quiz-stats{display:flex;justify-content:center;gap:2rem;margin-bottom:2rem}.stat-item{text-align:center}.stat-value{font-family:var(--font-display);font-size:2rem;color:var(--accent)}.stat-label{font-size:.85rem;color:var(--text-muted)}.completion-banner{background:linear-gradient(135deg,var(--accent),var(--accent-dark));color:#fff;border-radius:16px;padding:2rem;text-align:center;margin:2rem 0}.completion-banner h2{font-family:var(--font-display);font-size:1.75rem;margin-bottom:.5rem}.completion-banner p{opacity:.9;margin-bottom:1.5rem}.hidden{display:none!important}@media(max-width:640px){header,.progress-container{padding:.875rem 1rem}.logo-text{display:none}main{padding:1.5rem 1rem 3rem}.lesson-card,.quiz-section{padding:1.5rem;border-radius:12px}.topic-tab{padding:.5rem .75rem;font-size:.8rem}.nav-buttons{flex-direction:column}.nav-buttons .btn,.quiz-actions .btn{width:100%}.quiz-actions{flex-direction:column}}</style>
</head>
<body>
    <header><div class="header-container"><a href="/" class="logo"><div class="logo-icon"><svg viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg></div><span class="logo-text">OpticalOwners</span></a><button class="theme-toggle" id="themeToggle"><svg class="moon" viewBox="0 0 24 24"><path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"/></svg><svg class="sun" viewBox="0 0 24 24"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06z"/></svg></button></div></header>
    <div class="progress-container"><div class="progress-wrapper"><div class="progress-header"><span class="progress-label">Module 5: Loyalty & Referral Programs</span><span class="progress-text" id="progressText">0% Complete</span></div><div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div></div></div>
    <main>
        <div class="module-header"><div class="breadcrumb"><a href="/">Home</a><span>â€º</span><a href="/courses/">Courses</a><span>â€º</span><a href="/courses/customer-retention/">Customer Retention</a><span>â€º</span><span>Module 5</span></div><h1 class="module-title">Module 5: Loyalty & Referral Programs</h1><p class="module-description">Transform satisfied patients into active advocates who bring new business through structured loyalty and referral programs.</p></div>
        <div class="topic-nav"><button class="topic-tab active" data-topic="1">1. Loyalty Psychology</button><button class="topic-tab" data-topic="2">2. Program Design</button><button class="topic-tab" data-topic="3">3. Referral Systems</button><button class="topic-tab" data-topic="4">4. Asking for Referrals</button><button class="topic-tab" data-topic="5">5. Reviews & Testimonials</button><button class="topic-tab" data-topic="final">Final Quiz</button></div>

        <div class="topic-content active" id="topic-1">
            <div class="lesson-card">
                <h2>The Psychology of Loyalty</h2>
                <p>True loyalty goes beyond repeat purchases. Understanding what creates emotional loyalty helps you build programs that actually work.</p>
                <h3>Types of Loyalty</h3>
                <ul><li><strong>Behavioral loyalty:</strong> They buy from you repeatedly (habit, convenience)</li><li><strong>Emotional loyalty:</strong> They genuinely prefer you and recommend you</li><li><strong>Inertia:</strong> They stay because switching is hard (not true loyalty)</li></ul>
                <div class="key-point"><strong>Key Insight</strong>Behavioral loyalty can disappear instantly when a competitor offers better convenience or price. Emotional loyalty survives competition because it's based on relationship, not transaction.</div>
                <h3>What Creates Emotional Loyalty</h3>
                <ul><li><strong>Trust:</strong> They believe you have their best interests at heart</li><li><strong>Recognition:</strong> They feel known and valued as individuals</li><li><strong>Consistency:</strong> Reliable positive experiences over time</li><li><strong>Shared values:</strong> They identify with your practice's identity</li><li><strong>Community:</strong> They feel part of something</li></ul>
                <h3>Loyalty Drivers in Optical</h3>
                <ul><li>Doctor relationship and expertise</li><li>Staff who remember them</li><li>Consistent quality outcomes</li><li>Fair and transparent pricing</li><li>Convenient location and hours</li><li>Problem resolution when things go wrong</li></ul>
                <div class="tip-box"><svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg><div><strong>Pro Tip:</strong> Loyalty programs should enhance emotional loyalty, not replace it. Points and discounts attract bargain hunters; genuine relationships create advocates.</div></div>
            </div>
            <div class="quiz-section" data-quiz="1"><div class="quiz-header"><div class="quiz-icon"><svg viewBox="0 0 24 24"><path d="M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/></svg></div><div><div class="quiz-title">Knowledge Check</div><div class="quiz-subtitle">3 questions</div></div></div><div class="quiz-questions"><div class="question" data-correct="2"><div class="question-text"><span class="question-number">1.</span> Which type of loyalty survives competition?</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Behavioral loyalty</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Emotional loyalty</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Inertia</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Price loyalty</span></div></div><div class="feedback"></div></div><div class="question" data-correct="1"><div class="question-text"><span class="question-number">2.</span> What's the foundation of emotional loyalty?</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Trust</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Discounts</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Points</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Location</span></div></div><div class="feedback"></div></div><div class="question" data-correct="3"><div class="question-text"><span class="question-number">3.</span> Loyalty programs should:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Replace relationships</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Only offer discounts</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Enhance emotional loyalty</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Attract bargain hunters</span></div></div><div class="feedback"></div></div></div><div class="quiz-results"><div class="results-icon"><svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg></div><h3 class="results-title">Quiz Complete!</h3><p class="results-score"></p></div><div class="quiz-actions"><button class="btn btn-primary submit-quiz">Check Answers</button><button class="btn btn-secondary retry-quiz hidden">Try Again</button></div></div>
            <div class="nav-buttons"><div></div><button class="btn btn-primary next-topic" data-next="2">Next: Program Design <svg viewBox="0 0 24 24"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/></svg></button></div>
        </div>

        <div class="topic-content" id="topic-2">
            <div class="lesson-card">
                <h2>Designing Loyalty Programs</h2>
                <p>Effective loyalty programs are simple to understand, valuable to patients, and sustainable for your practice.</p>
                <h3>Program Types</h3>
                <ul><li><strong>Points-based:</strong> Earn points per dollar, redeem for rewards</li><li><strong>Tier-based:</strong> Status levels with increasing benefits</li><li><strong>Punch card:</strong> Simple X visits = reward</li><li><strong>Membership:</strong> Pay annual fee for exclusive benefits</li><li><strong>Value-add:</strong> Free services for loyal patients (no tracking)</li></ul>
                <div class="key-point"><strong>Key Insight</strong>Simpler is better. Complex programs with confusing rules create frustration rather than loyalty. If patients can't explain your program in one sentence, it's too complicated.</div>
                <h3>Optical-Specific Ideas</h3>
                <ul><li>Free annual adjustments and cleanings for patients</li><li>Discount on second pair with purchase</li><li>Priority scheduling for loyal patients</li><li>Free lens enhancements after X years</li><li>Family discounts</li><li>Referral rewards</li></ul>
                <h3>Design Principles</h3>
                <ul><li><strong>Easy to join:</strong> No complicated signup</li><li><strong>Easy to understand:</strong> Simple rules and rewards</li><li><strong>Achievable rewards:</strong> Not too far to reach</li><li><strong>Valuable rewards:</strong> Worth the effort to earn</li><li><strong>Sustainable:</strong> Profitable for your practice long-term</li></ul>
                <div class="tip-box"><svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg><div><strong>Pro Tip:</strong> Start with a simple value-add approachâ€”free adjustments, free cleanings, priority scheduling. These cost little but create significant goodwill.</div></div>
            </div>
            <div class="quiz-section" data-quiz="2"><div class="quiz-header"><div class="quiz-icon"><svg viewBox="0 0 24 24"><path d="M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/></svg></div><div><div class="quiz-title">Knowledge Check</div><div class="quiz-subtitle">3 questions</div></div></div><div class="quiz-questions"><div class="question" data-correct="2"><div class="question-text"><span class="question-number">1.</span> The best loyalty programs are:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Complex with many rules</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Simple to understand</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Hard to join</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Impossible to earn rewards</span></div></div><div class="feedback"></div></div><div class="question" data-correct="3"><div class="question-text"><span class="question-number">2.</span> A good starting loyalty approach is:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Complex points system</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Expensive membership fees</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Free adjustments and cleanings</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">No program at all</span></div></div><div class="feedback"></div></div><div class="question" data-correct="1"><div class="question-text"><span class="question-number">3.</span> Rewards should be:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Achievable and valuable</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Nearly impossible to earn</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Worthless</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Secret</span></div></div><div class="feedback"></div></div></div><div class="quiz-results"><div class="results-icon"><svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg></div><h3 class="results-title">Quiz Complete!</h3><p class="results-score"></p></div><div class="quiz-actions"><button class="btn btn-primary submit-quiz">Check Answers</button><button class="btn btn-secondary retry-quiz hidden">Try Again</button></div></div>
            <div class="nav-buttons"><button class="btn btn-secondary prev-topic" data-prev="1"><svg viewBox="0 0 24 24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg> Previous</button><button class="btn btn-primary next-topic" data-next="3">Next: Referral Systems <svg viewBox="0 0 24 24"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/></svg></button></div>
        </div>

        <div class="topic-content" id="topic-3">
            <div class="lesson-card">
                <h2>Building Referral Systems</h2>
                <p>Referrals are the best source of new patientsâ€”they cost less to acquire, have higher lifetime value, and are more loyal from day one.</p>
                <h3>Why Referrals Are Gold</h3>
                <ul><li>Referred patients have 16% higher lifetime value</li><li>37% higher retention rate</li><li>Lower acquisition cost than advertising</li><li>Come in with built-in trust</li><li>More likely to refer others themselves</li></ul>
                <div class="key-point"><strong>Key Insight</strong>Most satisfied patients don't referâ€”not because they don't want to, but because they don't think about it. Your job is to make referring easy and top-of-mind.</div>
                <h3>Referral Program Structure</h3>
                <ul><li><strong>Dual reward:</strong> Give something to BOTH referrer and new patient</li><li><strong>Immediate gratification:</strong> Reward promptly, not months later</li><li><strong>Easy to share:</strong> Simple cards, links, or codes</li><li><strong>Track and thank:</strong> Know who referred and acknowledge it</li></ul>
                <h3>Referral Reward Ideas</h3>
                <ul><li>$25 credit for both referrer and new patient</li><li>Free lens upgrades</li><li>Free accessory (cleaning kit, case)</li><li>Charitable donation in their name</li><li>Entry into quarterly drawings</li></ul>
                <div class="tip-box"><svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg><div><strong>Pro Tip:</strong> Always reward both parties. Single-sided rewards feel transactional. Dual rewards create a gift-giving dynamic that feels better for everyone.</div></div>
            </div>
            <div class="quiz-section" data-quiz="3"><div class="quiz-header"><div class="quiz-icon"><svg viewBox="0 0 24 24"><path d="M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/></svg></div><div><div class="quiz-title">Knowledge Check</div><div class="quiz-subtitle">3 questions</div></div></div><div class="quiz-questions"><div class="question" data-correct="2"><div class="question-text"><span class="question-number">1.</span> Referred patients have what advantage?</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Lower lifetime value</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Higher lifetime value and retention</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">More complaints</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">No difference</span></div></div><div class="feedback"></div></div><div class="question" data-correct="1"><div class="question-text"><span class="question-number">2.</span> Why don't satisfied patients refer more?</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">They don't think about it</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">They hate you</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">They have no friends</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">They want money</span></div></div><div class="feedback"></div></div><div class="question" data-correct="3"><div class="question-text"><span class="question-number">3.</span> Referral rewards should go to:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Only the referrer</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Only the new patient</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Both parties</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Neither</span></div></div><div class="feedback"></div></div></div><div class="quiz-results"><div class="results-icon"><svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg></div><h3 class="results-title">Quiz Complete!</h3><p class="results-score"></p></div><div class="quiz-actions"><button class="btn btn-primary submit-quiz">Check Answers</button><button class="btn btn-secondary retry-quiz hidden">Try Again</button></div></div>
            <div class="nav-buttons"><button class="btn btn-secondary prev-topic" data-prev="2"><svg viewBox="0 0 24 24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg> Previous</button><button class="btn btn-primary next-topic" data-next="4">Next: Asking for Referrals <svg viewBox="0 0 24 24"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/></svg></button></div>
        </div>

        <div class="topic-content" id="topic-4">
            <div class="lesson-card">
                <h2>Asking for Referrals</h2>
                <p>Many practices have referral programs but get few referrals because they never ask. The ask is everything.</p>
                <h3>When to Ask</h3>
                <ul><li><strong>Peak moments:</strong> When they're happiest (after pickup, after compliment)</li><li><strong>After solving a problem:</strong> Recovery creates gratitude</li><li><strong>During follow-up:</strong> "Everything going well? Know anyone else who needs..."</li><li><strong>At checkout:</strong> Hand them referral cards</li></ul>
                <div class="key-point"><strong>Key Insight</strong>The best time to ask is when they've just expressed satisfaction. "I'm so glad you love your new glasses! We'd love to help your friends and family see this well too."</div>
                <h3>How to Ask</h3>
                <ul><li><strong>Be direct:</strong> "Who do you know who might benefit from our care?"</li><li><strong>Be specific:</strong> "Any coworkers who need an eye exam?" is better than "know anyone?"</li><li><strong>Make it easy:</strong> Give them cards, links, or offer to send info directly</li><li><strong>Explain the benefit:</strong> "You'll both get $25 off"</li></ul>
                <h3>Natural Scripts</h3>
                <ul><li>"We love taking care of familiesâ€”any family members need new glasses?"</li><li>"Many of our best patients come from referrals. Who might benefit from our care?"</li><li>"Here are a few cards to share. You and your friends each get $25 when they visit."</li></ul>
                <div class="tip-box"><svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg><div><strong>Pro Tip:</strong> Ask everyone, every time. Make it a habit, not a special occasion. The more naturally you ask, the more referrals you'll get.</div></div>
            </div>
            <div class="quiz-section" data-quiz="4"><div class="quiz-header"><div class="quiz-icon"><svg viewBox="0 0 24 24"><path d="M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/></svg></div><div><div class="quiz-title">Knowledge Check</div><div class="quiz-subtitle">3 questions</div></div></div><div class="quiz-questions"><div class="question" data-correct="2"><div class="question-text"><span class="question-number">1.</span> Best time to ask for referrals:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">When they're complaining</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Peak moments of satisfaction</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Never</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Only by email</span></div></div><div class="feedback"></div></div><div class="question" data-correct="1"><div class="question-text"><span class="question-number">2.</span> Referral asks should be:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Direct and specific</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Vague and unclear</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Pushy and aggressive</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Avoided</span></div></div><div class="feedback"></div></div><div class="question" data-correct="3"><div class="question-text"><span class="question-number">3.</span> How often should you ask?</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Once ever</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Never</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Every time, make it habit</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Only on holidays</span></div></div><div class="feedback"></div></div></div><div class="quiz-results"><div class="results-icon"><svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg></div><h3 class="results-title">Quiz Complete!</h3><p class="results-score"></p></div><div class="quiz-actions"><button class="btn btn-primary submit-quiz">Check Answers</button><button class="btn btn-secondary retry-quiz hidden">Try Again</button></div></div>
            <div class="nav-buttons"><button class="btn btn-secondary prev-topic" data-prev="3"><svg viewBox="0 0 24 24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg> Previous</button><button class="btn btn-primary next-topic" data-next="5">Next: Reviews & Testimonials <svg viewBox="0 0 24 24"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/></svg></button></div>
        </div>

        <div class="topic-content" id="topic-5">
            <div class="lesson-card">
                <h2>Reviews & Testimonials</h2>
                <p>Online reviews are the modern referral. Most patients check reviews before choosing a practice. A strong review presence is essential.</p>
                <h3>Why Reviews Matter</h3>
                <ul><li>88% trust online reviews as much as personal recommendations</li><li>Practices with more reviews rank higher in search</li><li>Positive reviews overcome objections before they arise</li><li>Reviews provide free marketing content</li></ul>
                <div class="key-point"><strong>Key Insight</strong>You don't need perfect reviewsâ€”you need enough reviews. 4.5 stars with 200 reviews beats 5 stars with 3 reviews. Volume builds credibility.</div>
                <h3>Getting More Reviews</h3>
                <ul><li><strong>Ask systematically:</strong> Every satisfied patient, every time</li><li><strong>Make it easy:</strong> Send direct link to Google or Yelp</li><li><strong>Time it right:</strong> 3-7 days after visit (experience still fresh)</li><li><strong>Use automated follow-up:</strong> Text or email with link</li></ul>
                <h3>Responding to Reviews</h3>
                <ul><li><strong>Respond to all:</strong> Positive and negative</li><li><strong>Thank positive reviewers:</strong> Brief and genuine</li><li><strong>Handle negative professionally:</strong> Apologize, offer to resolve offline</li><li><strong>Never argue publicly:</strong> It looks bad to future patients</li></ul>
                <div class="tip-box"><svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg><div><strong>Pro Tip:</strong> Create a simple review request process: "We'd love your feedback! Here's a link to share your experience." Send 3-7 days post-visit when they're enjoying their new glasses.</div></div>
            </div>
            <div class="quiz-section" data-quiz="5"><div class="quiz-header"><div class="quiz-icon"><svg viewBox="0 0 24 24"><path d="M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/></svg></div><div><div class="quiz-title">Knowledge Check</div><div class="quiz-subtitle">3 questions</div></div></div><div class="quiz-questions"><div class="question" data-correct="2"><div class="question-text"><span class="question-number">1.</span> What matters more for reviews?</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Perfect 5 stars with few reviews</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Good rating with many reviews</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">No reviews</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Only negative reviews</span></div></div><div class="feedback"></div></div><div class="question" data-correct="1"><div class="question-text"><span class="question-number">2.</span> When to send review requests:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">3-7 days after visit</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">1 year later</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Never</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Before the visit</span></div></div><div class="feedback"></div></div><div class="question" data-correct="3"><div class="question-text"><span class="question-number">3.</span> How to handle negative reviews:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Argue publicly</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Ignore them</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Apologize and offer to resolve offline</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Delete them</span></div></div><div class="feedback"></div></div></div><div class="quiz-results"><div class="results-icon"><svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg></div><h3 class="results-title">Quiz Complete!</h3><p class="results-score"></p></div><div class="quiz-actions"><button class="btn btn-primary submit-quiz">Check Answers</button><button class="btn btn-secondary retry-quiz hidden">Try Again</button></div></div>
            <div class="nav-buttons"><button class="btn btn-secondary prev-topic" data-prev="4"><svg viewBox="0 0 24 24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg> Previous</button><button class="btn btn-primary next-topic" data-next="final">Take Final Quiz <svg viewBox="0 0 24 24"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/></svg></button></div>
        </div>

        <div class="topic-content" id="topic-final">
            <div class="quiz-section">
                <div class="final-quiz-intro" id="finalQuizIntro"><h2>Module 5 Final Quiz</h2><p>Complete this quiz to finish the Customer Retention course. You need 70% to pass.</p><div class="final-quiz-stats"><div class="stat-item"><div class="stat-value">10</div><div class="stat-label">Questions</div></div><div class="stat-item"><div class="stat-value">70%</div><div class="stat-label">Passing Score</div></div></div><button class="btn btn-primary" id="startFinalQuiz">Start Final Quiz</button></div>
                <div class="hidden" id="finalQuizContent">
                    <div class="quiz-header"><div class="quiz-icon"><svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg></div><div><div class="quiz-title">Final Quiz</div><div class="quiz-subtitle">10 questions</div></div></div>
                    <div class="quiz-questions" data-quiz="final">
                        <div class="question" data-correct="2"><div class="question-text"><span class="question-number">1.</span> Which loyalty survives competition?</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Behavioral</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Emotional</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Inertia</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Price</span></div></div><div class="feedback"></div></div>
                        <div class="question" data-correct="1"><div class="question-text"><span class="question-number">2.</span> Foundation of emotional loyalty:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Trust</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Discounts</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Points</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Location</span></div></div><div class="feedback"></div></div>
                        <div class="question" data-correct="2"><div class="question-text"><span class="question-number">3.</span> Best loyalty programs are:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Complex</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Simple</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Hidden</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Expensive</span></div></div><div class="feedback"></div></div>
                        <div class="question" data-correct="2"><div class="question-text"><span class="question-number">4.</span> Referred patients have:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Lower value</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Higher lifetime value</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">More complaints</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">No difference</span></div></div><div class="feedback"></div></div>
                        <div class="question" data-correct="3"><div class="question-text"><span class="question-number">5.</span> Referral rewards should go to:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Only referrer</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Only new patient</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Both parties</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Neither</span></div></div><div class="feedback"></div></div>
                        <div class="question" data-correct="2"><div class="question-text"><span class="question-number">6.</span> Best time to ask for referral:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">During complaints</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Peak satisfaction moments</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Never</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Before exam</span></div></div><div class="feedback"></div></div>
                        <div class="question" data-correct="3"><div class="question-text"><span class="question-number">7.</span> How often ask for referrals?</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Once ever</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Never</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Every time</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Holidays only</span></div></div><div class="feedback"></div></div>
                        <div class="question" data-correct="2"><div class="question-text"><span class="question-number">8.</span> For reviews, volume or perfection?</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">5 stars, few reviews</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Good rating, many reviews</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">No reviews</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">All negative</span></div></div><div class="feedback"></div></div>
                        <div class="question" data-correct="1"><div class="question-text"><span class="question-number">9.</span> When to request reviews:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">3-7 days post-visit</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">1 year later</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Never</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Before visit</span></div></div><div class="feedback"></div></div>
                        <div class="question" data-correct="3"><div class="question-text"><span class="question-number">10.</span> Handle negative reviews by:</div><div class="options"><div class="option" data-option="1"><span class="option-radio"></span><span class="option-text">Arguing publicly</span></div><div class="option" data-option="2"><span class="option-radio"></span><span class="option-text">Ignoring</span></div><div class="option" data-option="3"><span class="option-radio"></span><span class="option-text">Apologize, resolve offline</span></div><div class="option" data-option="4"><span class="option-radio"></span><span class="option-text">Deleting</span></div></div><div class="feedback"></div></div>
                    </div>
                    <div class="quiz-results" id="finalQuizResults"><div class="results-icon"><svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg></div><h3 class="results-title"></h3><p class="results-score"></p></div>
                    <div class="quiz-actions"><button class="btn btn-primary" id="submitFinalQuiz">Submit Final Quiz</button><button class="btn btn-secondary hidden" id="retryFinalQuiz">Try Again</button></div>
                </div>
                <div class="completion-banner hidden" id="completionBanner">
                    <h2>ðŸŽ‰ Customer Retention Course Complete!</h2>
                    <p>Congratulations! You've mastered the fundamentals of customer retention. Apply these principles to keep your patients coming back for years.</p>
                    <a href="/courses/" class="btn" style="background:white;color:var(--accent)">Back to Courses</a>
                </div>
            </div>
            <div class="nav-buttons"><button class="btn btn-secondary prev-topic" data-prev="5"><svg viewBox="0 0 24 24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg> Back to Topics</button><div></div></div>
        </div>
    </main>
    <script>const themeToggle=document.getElementById('themeToggle'),savedTheme=localStorage.getItem('theme')||'light';document.documentElement.setAttribute('data-theme',savedTheme);themeToggle.addEventListener('click',()=>{const c=document.documentElement.getAttribute('data-theme'),n=c==='dark'?'light':'dark';document.documentElement.setAttribute('data-theme',n);localStorage.setItem('theme',n)});const state=JSON.parse(localStorage.getItem('retentionModule5Progress')||'{"completed":[],"current":1}'),totalTopics=5;function updateProgress(){const p=Math.round((state.completed.length/(totalTopics+1))*100);document.getElementById('progressFill').style.width=p+'%';document.getElementById('progressText').textContent=p+'% Complete';localStorage.setItem('retentionModule5Progress',JSON.stringify(state))}function markTopicComplete(n){if(!state.completed.includes(n)){state.completed.push(n);updateProgress()}const t=document.querySelector('.topic-tab[data-topic="'+n+'"]');if(t&&n!=='final')t.classList.add('completed')}function showTopic(id){document.querySelectorAll('.topic-content').forEach(t=>t.classList.remove('active'));document.querySelectorAll('.topic-tab').forEach(t=>t.classList.remove('active'));document.getElementById('topic-'+id).classList.add('active');document.querySelector('.topic-tab[data-topic="'+id+'"]').classList.add('active');state.current=id;localStorage.setItem('retentionModule5Progress',JSON.stringify(state));window.scrollTo({top:0,behavior:'smooth'})}document.querySelectorAll('.topic-tab').forEach(t=>t.addEventListener('click',()=>showTopic(t.dataset.topic)));document.querySelectorAll('.next-topic').forEach(b=>b.addEventListener('click',()=>showTopic(b.dataset.next)));document.querySelectorAll('.prev-topic').forEach(b=>b.addEventListener('click',()=>showTopic(b.dataset.prev)));document.querySelectorAll('.quiz-section').forEach(quiz=>{const questions=quiz.querySelectorAll('.question'),submitBtn=quiz.querySelector('.submit-quiz'),retryBtn=quiz.querySelector('.retry-quiz'),resultsDiv=quiz.querySelector('.quiz-results');if(!submitBtn)return;questions.forEach(q=>{q.querySelectorAll('.option').forEach(o=>{o.addEventListener('click',()=>{if(q.classList.contains('answered'))return;q.querySelectorAll('.option').forEach(x=>x.classList.remove('selected'));o.classList.add('selected')})})});submitBtn.addEventListener('click',()=>{let c=0;questions.forEach(q=>{q.classList.add('answered');const ca=q.dataset.correct,s=q.querySelector('.option.selected'),f=q.querySelector('.feedback');if(s){if(s.dataset.option===ca){c++;s.classList.add('correct');f.textContent='âœ“ Correct!';f.className='feedback show correct'}else{s.classList.add('incorrect');q.querySelector('.option[data-option="'+ca+'"]').classList.add('correct');f.textContent='âœ— Incorrect';f.className='feedback show incorrect'}}else{q.querySelector('.option[data-option="'+ca+'"]').classList.add('correct');f.textContent='âœ— No answer';f.className='feedback show incorrect'}});const t=questions.length,p=Math.round((c/t)*100),pass=p>=70;resultsDiv.querySelector('.results-score').textContent='You scored '+c+'/'+t+' ('+p+'%)';resultsDiv.querySelector('.results-icon').className='results-icon '+(pass?'pass':'fail');resultsDiv.querySelector('.results-title').textContent=pass?'Great Job!':'Keep Practicing';resultsDiv.classList.add('show');submitBtn.classList.add('hidden');retryBtn.classList.remove('hidden');if(pass){const qn=quiz.dataset.quiz;if(qn)markTopicComplete(parseInt(qn))}});retryBtn.addEventListener('click',()=>{questions.forEach(q=>{q.classList.remove('answered');q.querySelectorAll('.option').forEach(o=>o.classList.remove('selected','correct','incorrect'));q.querySelector('.feedback').className='feedback'});resultsDiv.classList.remove('show');retryBtn.classList.add('hidden');submitBtn.classList.remove('hidden')})});const startFinalBtn=document.getElementById('startFinalQuiz'),finalQuizIntro=document.getElementById('finalQuizIntro'),finalQuizContent=document.getElementById('finalQuizContent'),submitFinalBtn=document.getElementById('submitFinalQuiz'),retryFinalBtn=document.getElementById('retryFinalQuiz'),completionBanner=document.getElementById('completionBanner'),finalResults=document.getElementById('finalQuizResults');if(startFinalBtn)startFinalBtn.addEventListener('click',()=>{finalQuizIntro.classList.add('hidden');finalQuizContent.classList.remove('hidden')});if(submitFinalBtn){const fq=finalQuizContent.querySelectorAll('.question');fq.forEach(q=>{q.querySelectorAll('.option').forEach(o=>{o.addEventListener('click',()=>{if(q.classList.contains('answered'))return;q.querySelectorAll('.option').forEach(x=>x.classList.remove('selected'));o.classList.add('selected')})})});submitFinalBtn.addEventListener('click',()=>{let c=0;fq.forEach(q=>{q.classList.add('answered');const ca=q.dataset.correct,s=q.querySelector('.option.selected'),f=q.querySelector('.feedback');if(s){if(s.dataset.option===ca){c++;s.classList.add('correct');f.textContent='âœ“ Correct!';f.className='feedback show correct'}else{s.classList.add('incorrect');q.querySelector('.option[data-option="'+ca+'"]').classList.add('correct');f.textContent='âœ— Incorrect';f.className='feedback show incorrect'}}else{q.querySelector('.option[data-option="'+ca+'"]').classList.add('correct');f.textContent='âœ— No answer';f.className='feedback show incorrect'}});const p=Math.round((c/10)*100),pass=p>=70;finalResults.querySelector('.results-score').textContent='You scored '+c+'/10 ('+p+'%)';finalResults.querySelector('.results-icon').className='results-icon '+(pass?'pass':'fail');finalResults.querySelector('.results-title').textContent=pass?'Course Complete!':'Not Quite';finalResults.classList.add('show');submitFinalBtn.classList.add('hidden');if(pass){markTopicComplete('final');completionBanner.classList.remove('hidden');localStorage.setItem('retentionCourseComplete','true')}else{retryFinalBtn.classList.remove('hidden')}});retryFinalBtn.addEventListener('click',()=>{fq.forEach(q=>{q.classList.remove('answered');q.querySelectorAll('.option').forEach(o=>o.classList.remove('selected','correct','incorrect'));q.querySelector('.feedback').className='feedback'});finalResults.classList.remove('show');retryFinalBtn.classList.add('hidden');submitFinalBtn.classList.remove('hidden')})}updateProgress();state.completed.forEach(n=>{const t=document.querySelector('.topic-tab[data-topic="'+n+'"]');if(t&&n!=='final')t.classList.add('completed')});</script>
</body>
</html>
